
CREATE TABLE "Resorts"(
  resort_id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
  resort_name TEXT NOT NULL,
  resort_location INTEGER NOT NULL,
  resort_website TEXT NOT NULL,
  resort_traffic_source INTEGER,
  resort_weather_source INTEGER,
  resort_twitter_source INTEGER,
  resort_phone_number INTEGER NOT NULL,
  CONSTRAINT "Locations_Resorts"
    FOREIGN KEY (resort_location) REFERENCES "Locations" (location_id)
      ON DELETE Set null ON UPDATE Cascade,
  CONSTRAINT "Traffic_Sources_Resorts"
    FOREIGN KEY (resort_traffic_source)
      REFERENCES "Traffic_Sources" (traffic_source_id) ON DELETE Set null
      ON UPDATE Cascade,
  CONSTRAINT "Weather_Sources_Resorts"
    FOREIGN KEY (resort_weather_source)
      REFERENCES "Weather_Sources" (weather_source_id) ON DELETE Set null
      ON UPDATE Cascade,
  CONSTRAINT "Twitter_Sources_Resorts"
    FOREIGN KEY (resort_twitter_source)
      REFERENCES "Twitter_Sources" (twitter_source_id) ON DELETE Set null
      ON UPDATE Cascade,
  CONSTRAINT "Phone_Numbers_Resorts"
    FOREIGN KEY (resort_phone_number) REFERENCES "Phone_Numbers" (phone_number_id)
      ON DELETE Set null ON UPDATE Cascade
);

CREATE TABLE "Locations"(
  location_id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
  street_name TEXT NOT NULL,
  street_number_1 TEXT NOT NULL,
  street_number_2 TEXT,
  city TEXT NOT NULL,
  state TEXT NOT NULL,
  zip_code TEXT NOT NULL
);

CREATE TABLE "Traffic_Sources"(
traffic_source_id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
  traffic_source_url TEXT NOT NULL
);

CREATE TABLE "Weather_Sources"(
weather_source_id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
  weather_source_url TEXT NOT NULL
);

CREATE TABLE "Twitter_Sources"(
twitter_source_id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
  twitter_source_url TEXT NOT NULL
);

CREATE TABLE "Slopes"(
  slope_id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
  slope_name TEXT NOT NULL,
  slope_difficulty INTEGER NOT NULL,
  CONSTRAINT "Slope_Difficulty_Categories_Slopes"
    FOREIGN KEY (slope_difficulty)
      REFERENCES "Slope_Difficulty_Categories" (slope_difficulty_id)
      ON DELETE Restrict ON UPDATE Cascade
);

CREATE TABLE "Slope_Difficulty_Categories"(
slope_difficulty_id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
  slope_difficulty_level TEXT NOT NULL
);

CREATE TABLE "Resorts_Slopes"(
  resort_id INTEGER NOT NULL,
  slope_id INTEGER NOT NULL,
  PRIMARY KEY(resort_id, slope_id),
  CONSTRAINT "Resorts_Resorts_Slopes"
    FOREIGN KEY (resort_id) REFERENCES "Resorts" (resort_id) ON DELETE Cascade
      ON UPDATE Cascade,
  CONSTRAINT "Slopes_Resorts_Slopes"
    FOREIGN KEY (slope_id) REFERENCES "Slopes" (slope_id) ON DELETE Cascade
      ON UPDATE Cascade
);

CREATE TABLE "Access_Roads"(
  access_road_id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
  road_name TEXT NOT NULL,
  road_direction TEXT NOT NULL,
  road_status INTEGER,
  CONSTRAINT "Road_Status_Access_Roads"
    FOREIGN KEY (road_status) REFERENCES "Road_Status" (road_status_id)
      ON DELETE Set null ON UPDATE Cascade
);

CREATE TABLE "Resorts_Access_Roads"(
  access_road_id INTEGER NOT NULL,
  resort_id INTEGER NOT NULL,
  "is_to_resort?" INTEGER NOT NULL,
  "is_from_resort?" INTEGER NOT NULL,
  PRIMARY KEY(access_road_id, resort_id),
  CONSTRAINT "Access_Roads_Resorts_Access_Roads"
    FOREIGN KEY (access_road_id) REFERENCES "Access_Roads" (access_road_id)
      ON DELETE Cascade ON UPDATE Cascade,
  CONSTRAINT "Resorts_Resorts_Access_Roads"
    FOREIGN KEY (resort_id) REFERENCES "Resorts" (resort_id) ON DELETE Cascade
      ON UPDATE Cascade
);

CREATE TABLE "Road_Status"(
  road_status_id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
  road_status_category INTEGER NOT NULL,
  wa_chain_control INTEGER,
  ca_chain_control INTEGER,
  access_road INTEGER,
  CONSTRAINT "Road_Status_Categories_Road_Status"
    FOREIGN KEY (road_status_category)
      REFERENCES "Road_Status_Categories" (road_status_category_id)
      ON DELETE Restrict ON UPDATE Cascade,
  CONSTRAINT "Chain_Control_Categories_Washington_Road_Status"
    FOREIGN KEY (wa_chain_control)
      REFERENCES "Chain_Control_Categories_Washington" (wa_chain_control_id)
      ON DELETE Set null ON UPDATE Cascade,
  CONSTRAINT "Road_Status_Chain_Control_Categories_California_ca_chain_control_id_fk"
    FOREIGN KEY (ca_chain_control)
      REFERENCES "Chain_Control_Categories_California" (ca_chain_control_id)
      ON DELETE Set null ON UPDATE Cascade,
  CONSTRAINT "Road_Status_Access_Roads_access_road_id_fk"
    FOREIGN KEY (access_road)
      REFERENCES "Access_Roads" (access_road_id)
          ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE "Road_Status_Categories"(
road_status_category_id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
  road_status TEXT NOT NULL
);

CREATE TABLE "Chain_Control_Categories_Washington"(
wa_chain_control_id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
  wa_chain_control_level_description TEXT NOT NULL,
  wa_chain_control_level TEXT NOT NULL
);
CREATE TABLE "Chain_Control_Categories_California"(
  ca_chain_control_id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
  ca_chain_control_level_description TEXT NOT NULL,
  ca_chain_control_level TEXT NOT NULL
);

CREATE TABLE "Phone_Numbers"(
  phone_number_id INTEGER NOT NULL,
  country_code TEXT NOT NULL,
  area_code TEXT,
  phone_number TEXT NOT NULL,
  PRIMARY KEY(phone_number_id)
);